<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Scoping - REX-STL Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../documentation/introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Documentation</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../documentation/building_rsl.html"><strong aria-hidden="true">2.1.</strong> Building RSL</a></li><li class="chapter-item expanded "><a href="../documentation/comment_tags.html"><strong aria-hidden="true">2.2.</strong> Comment Tags</a></li><li class="chapter-item expanded "><a href="../documentation/glossary.html"><strong aria-hidden="true">2.3.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../documentation/memory.html"><strong aria-hidden="true">2.4.</strong> Memory</a></li><li class="chapter-item expanded "><a href="../documentation/rsl_vs_std_notes.html"><strong aria-hidden="true">2.5.</strong> Rsl vs Stl</a></li><li class="chapter-item expanded "><a href="../documentation/coding_practices.html"><strong aria-hidden="true">2.6.</strong> Coding Practices</a></li></ol></li><li class="chapter-item expanded "><a href="../guidelines/introduction.html"><strong aria-hidden="true">3.</strong> Coding Guidelines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guidelines/files.html"><strong aria-hidden="true">3.1.</strong> Files</a></li><li class="chapter-item expanded "><a href="../guidelines/scoping.html" class="active"><strong aria-hidden="true">3.2.</strong> Scoping</a></li><li class="chapter-item expanded "><a href="../guidelines/classes.html"><strong aria-hidden="true">3.3.</strong> Classes</a></li><li class="chapter-item expanded "><a href="../guidelines/functions.html"><strong aria-hidden="true">3.4.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../guidelines/selections.html"><strong aria-hidden="true">3.5.</strong> Selections</a></li><li class="chapter-item expanded "><a href="../guidelines/iterations.html"><strong aria-hidden="true">3.6.</strong> Iterations</a></li><li class="chapter-item expanded "><a href="../guidelines/enumerations.html"><strong aria-hidden="true">3.7.</strong> Enumerations</a></li><li class="chapter-item expanded "><a href="../guidelines/ownership.html"><strong aria-hidden="true">3.8.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../guidelines/templates.html"><strong aria-hidden="true">3.9.</strong> Templates</a></li><li class="chapter-item expanded "><a href="../guidelines/auto.html"><strong aria-hidden="true">3.10.</strong> Auto</a></li><li class="chapter-item expanded "><a href="../guidelines/lambdas.html"><strong aria-hidden="true">3.11.</strong> Lambdas</a></li><li class="chapter-item expanded "><a href="../guidelines/other_cpp_features.html"><strong aria-hidden="true">3.12.</strong> Other CPP Features</a></li><li class="chapter-item expanded "><a href="../guidelines/naming.html"><strong aria-hidden="true">3.13.</strong> Naming</a></li><li class="chapter-item expanded "><a href="../guidelines/debug_vs_retail.html"><strong aria-hidden="true">3.14.</strong> Debug VS. Retail</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">REX-STL Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="scoping"><a class="header" href="#scoping">Scoping</a></h1>
<p>Scoping is very important in a big code base. 
Have the proper scope for objects improves readability, usability, maintainability and will your make life easier in general.</p>
<h2 id="global-scope"><a class="header" href="#global-scope">Global Scope</a></h2>
<p>Nothing is allowed under global scope, always hide your functions, objects under at least 1 namespace.</p>
<h2 id="namespaces"><a class="header" href="#namespaces">Namespaces</a></h2>
<p>All code should be under a namespace, they will highly improve code readability and avoid clashing names.</p>
<p>Don’t use using-directives in headers, they may be allowed in source files only if there is absolutely no confusion.</p>
<p>Only use inline namespaces after clear review of no better alternative.</p>
<p>Using-directives are only allowd in local scope, and even in there, keep the scope to a minimum.</p>
<pre><code class="language-cpp">    namespace my_namespace
    {
        void namespace_function()
        {
            // Do something
        }
    }

    void wrong_function(int x) // WRONG
    {
        using namespace my_namespace;
        if (x == 0)
        {
            namespace_function();
        }   
    }

    void my_function_1(int x) // OK
    {
        if (x == 0)
        {
            using namespace my_namespace;
            namespace_function();
        }   
    }

    void my_function_2(int x) // EVEN BETTER
    {
        if (x == 0)
        {
            my_namespace::namespace_function();
        }   
    }

</code></pre>
<h3 id="anonymous-namespace"><a class="header" href="#anonymous-namespace">Anonymous namespace</a></h3>
<p>When definitions don’t need to be referenced outside of that file, place them in an unnamed namespace, declaring them static is an old way of doing things, we don’t do that anymore. Don’t use either of these constructs in a header file.</p>
<p>However, it is preferred to put these definitions in an open namespace of the namespace belonging to this file to improve readability.</p>
<pre><code class="language-cpp">
// SOURCE FILE - belonging to rex namespace

namespace // NOT RECOMMENDED
{
    int g_my_global_int = 0;
}

namespace rex // OK
{
    float g_my_global_float = 1.0f;
}

rex::foo()
{
    g_my_global_int = 1;
    g_my_global_float = 2.0f;
}

</code></pre>
<h3 id="nonmember-static-member-and-globals-functions"><a class="header" href="#nonmember-static-member-and-globals-functions">Nonmember, static member and globals functions</a></h3>
<p>Don’t use a class just to group static functions together. Use a namespace instead. The interface is the same and it’s clearer that an instance of it will never exist. When writing utility functions linked to a specific system (eg. file system) put the utility functions in a namespace.</p>
<pre><code class="language-cpp">
namespace rex::vfs
{
    void some_utility_function();
}

void rex::foo()
{
    rex::vfs::some_utility_function();
}
</code></pre>
<h2 id="static-and-global-variables"><a class="header" href="#static-and-global-variables">Static and Global Variables</a></h2>
<p>Objects with global static storage duration are forbidden unless they are trivially destructible. This means the destructor does not do anything, even taking member and base destructors into account.</p>
<p>Static or global variables should be const or constexpr by default, only in rare cases they are not. If your object uses dynamic initialization, wrap them in a function and return a local static instead.</p>
<pre><code class="language-cpp">MyThing g_my_thing; // WRONG

MyThing&amp; my_thing() // OK
{
    static MyThing my_thing;

    return my_thing;
}
</code></pre>
<p>Statics between translation units are initialized in an undefined order, so it’s discouraged to have them depend on each other. Statics are commonly string literals or math constants used in specific parts of the codebase.</p>
<p>A general rule of thumb: if you can’t mark your static as constexpr, it’s likely it uses dynamic initialization (before C++20) and is therefore not allowed to be a global static variable.</p>
<h2 id="local-variables"><a class="header" href="#local-variables">Local Variables</a></h2>
<p>Always initialize variables when they’re declared</p>
<pre><code class="language-cpp">    void my_function()
    {
        int i;
        i = f(); // WRONG
        
        int i = f(); // OK
        
        rsl::vector&lt;int&gt; vec;
        vec.push_back(1);   // WRONG
        vec.push_back(2);   // WRONG
        
        rsl::vector&lt;int&gt; vec = {1, 2}; // OK
    }
</code></pre>
<p>A local variable must be put in the narrowest scope possible.</p>
<pre><code class="language-cpp">    void my_function()
    {
        int i = 0;  // WRONG, NOT USED IN THIS SCOPE
        
        // Some code not using 'i'
        // ...
        
        if (condition)
        {
            i = do_something();
            do_something_with(i);
        }
        
        // i not used here
        // ...
    }

    void my_function()
    {
        // Some code
        // ...
        
        if (condition)
        {
            int i = do_something(); // OK, ONLY USED IN THIS SCOPE
            do_something_with(i);
        }
        
        // Some code
        // ...
    }
</code></pre>
<p>There’s 1 exception to this rule. When the variable is a class-type and it’s used in a loop, its constructor and destructor will be called every time when entering or leaving the scope. </p>
<p>It’s okay to declare it right outside of the scope then. Smart compilers moved plain old datatypes out of a loop automatically but this is implementation defined, better to help the compiler instead of hoping it will do it for you.</p>
<p>Note: be careful this doesn’t change the behavior of the code.</p>
<pre><code class="language-cpp">    void my_function()
    {
        for (int i = 0; i &lt; 10'000; ++i)
        {
            Foo foo;    // WRONG, CTOR AND DTOR CALLED 10'000 TIMES
            foo.do_something();
        }
    }

    void my_function()
    {
        Foo foo;    // OK, CTOR AND DTOR ONLY CALLED ONCE
        for (int i = 0; i &lt; 10'000; ++i)
        {
            foo.do_something();
        }
    }
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guidelines/files.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../guidelines/classes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guidelines/files.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../guidelines/classes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
